{"version":3,"sources":["helpers/helpers.ts"],"names":["powerbitests","powerbitests.helpers","powerbitests.helpers.fireOnDataChanged","powerbitests.helpers.testDom","powerbitests.helpers.executeWithDelay","powerbitests.helpers.isTranslateCloseTo","powerbitests.helpers.isCloseTo","powerbitests.helpers.buildSelectorForColumn","powerbitests.helpers.getDragStartTriggerFunctionForD3","powerbitests.helpers.suppressJasmineMissingExpectWarning","powerbitests.helpers.ClickEventType","powerbitests.helpers.clickElement","powerbitests.helpers.runWithImmediateAnimationFrames","powerbitests.helpers.deepCopy","powerbitests.helpers.getLocalTimeFromUTCBase","powerbitests.helpers.isUndefined","powerbitests.helpers.ContextMenuEntityButtonPosition","powerbitests.helpers.ContextMenuPropertyButtonPosition","powerbitests.helpers.parseDateString","powerbitests.helpers.createMouseWheelEvent","powerbitests.helpers.createMouseClickEvent","powerbitests.helpers.verifyEllipsisActive","powerbitests.helpers.isInRange","powerbitests.helpers.assertColorsMatch","powerbitests.helpers.assertFontSizeMatch","powerbitests.helpers.verifyPositionAttributes","powerbitests.helpers.findElementText","powerbitests.helpers.findElementTitle","powerbitests.helpers.DataViewBuilder","powerbitests.helpers.DataViewBuilder.constructor","powerbitests.helpers.DataViewBuilder.setMetadata","powerbitests.helpers.DataViewBuilder.getMetadata","powerbitests.helpers.DataViewBuilder.setCategorical","powerbitests.helpers.DataViewBuilder.setCategories","powerbitests.helpers.DataViewBuilder.addCategory","powerbitests.helpers.DataViewBuilder.categoryBuilder","powerbitests.helpers.DataViewBuilder.categoryBuilder.setIdentity","powerbitests.helpers.DataViewBuilder.categoryBuilder.setIdentityFields","powerbitests.helpers.DataViewBuilder.categoryBuilder.setSource","powerbitests.helpers.DataViewBuilder.categoryBuilder.setValues","powerbitests.helpers.DataViewBuilder.categoryBuilder.setObjects","powerbitests.helpers.DataViewBuilder.categoryBuilder.buildCategory","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setSubtotal","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setMax","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setMin","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setHighlights","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setIdentity","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setMaxLocal","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setMinLocal","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setSource","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setValues","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.setObjects","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.newValueBuilder.buildNewValue","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.setValueIdentityFields","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.setSource","powerbitests.helpers.DataViewBuilder.valueColumnsBuilder.buildValueColumns","powerbitests.helpers.DataViewBuilder.setValues","powerbitests.helpers.DataViewBuilder.build","powerbitests.helpers.DataViewBuilder.initCategorical","powerbitests.helpers.DataViewBuilder.initCategories","powerbitests.helpers.VisualBuilder","powerbitests.helpers.VisualBuilder.constructor","powerbitests.helpers.VisualBuilder.host","powerbitests.helpers.VisualBuilder.element","powerbitests.helpers.VisualBuilder.visual","powerbitests.helpers.VisualBuilder.init","powerbitests.helpers.VisualBuilder.createElement","powerbitests.helpers.VisualBuilder.createHost","powerbitests.helpers.VisualBuilder.createStyle","powerbitests.helpers.VisualBuilder.createVisual","powerbitests.helpers.VisualBuilder.initVisual","powerbitests.helpers.VisualBuilder.setSize","powerbitests.helpers.VisualBuilder.build","powerbitests.helpers.verifyReferenceLine"],"mappings":"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MA,CAACA,CAACA,YAAYA,CAACA,EAAEA,CAACA,CAACA;gBACpCA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACFA,MAAMA,CAACA,MAAMA,CAACA,CAACA,eAAeA,CAACA,EAAEA,CAACA,CAACA;gBACvCA,CAACA;YACLA,CAACA;YACDA,IAAIA,CAACA,CAACA;gBACFA,EAAEA,CAACA,CAACA,UAAUA,CAACA,KAAKA,CAACA,kBAAkBA,KAAKA,OAAOA,CAACA,OAAOA,CAACA,wCAAwCA,CAACA,IAAIA,CAACA,CAACA,CAACA;oBACxGA,MAAMA,CAACA,MAAMA,CAACA,CAACA,YAAYA,CAACA,EAAEA,CAACA,CAACA;gBACpCA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACFA,MAAMA,CAACA,MAAMA,CAACA,CAACA,eAAeA,CAACA,EAAEA,CAACA,CAACA;gBACvCA,CAACA;gBAEDA,EAAEA,CAACA,CAACA,UAAUA,CAACA,KAAKA,CAACA,gBAAgBA,KAAKA,OAAOA,CAACA,OAAOA,CAACA,sCAAsCA,CAACA,KAAKA,CAACA,CAACA,CAACA;oBACrGA,MAAMA,CAACA,OAAOA,CAACA,SAASA,CAACA,MAAMA,EAAEA,UAAUA,CAACA,EAAEA,CAACA,EAAEA,EAAEA,CAACA,CAACA,CAACA,UAAUA,EAAEA,CAACA;gBACvEA,CAACA;gBACDA,IAAIA,CAACA,CAACA;oBACFA,MAAMA,CAACA,OAAOA,CAACA,SAASA,CAACA,MAAMA,EAAEA,UAAUA,CAACA,EAAEA,CAACA,EAAEA,EAAEA,CAACA,CAACA,CAACA,UAAUA,EAAEA,CAACA;gBACvEA,CAACA;YACLA,CAACA;QACLA,CAACA;QAvEe1E,2BAAmBA,sBAuElCA,CAAAA;IACLA,CAACA,EA9oBmBD,OAAOA,GAAPA,oBAAOA,KAAPA,oBAAOA,QA8oB1BA;AAADA,CAACA,EA9oBM,YAAY,KAAZ,YAAY,QA8oBlB","file":"helpers/helpers.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n\r\n\r\n/* tslint:disable */\r\nconst powerBIAccessToken = \"fooBarBaz\";\r\nconst powerBIAccessTokenExpiry = \"2115-01-01 00:00:00Z\";\r\n/* tslint:enable */\r\n\r\ndeclare interface JQuery {\r\n    d3Click(x: number, y: number, eventType?: powerbitests.helpers.ClickEventType): void;\r\n}\r\n\r\nmodule powerbitests.helpers {\r\n    debug.assertFailFunction = (message: string) => {\r\n        expect(message).toBe('DEBUG asserts should never happen.  There is a product or test bug.');\r\n    };\r\n\r\n    export let dataSets = {\r\n        singleMeasureDataViewSource: '{\"descriptor\": {\"Select\": [{\"Kind\": 2, \"Value\": \"M0\"}]}, \"dsr\": {\"DataShapes\":[{\"Id\":\"DS0\",\"PrimaryHierarchy\":[{\"Id\":\"DM0\",\"Instances\":[{\"Calculations\":[{\"Id\":\"M0\",\"Value\":\"21852688.46698004D\"}]}]}],\"IsComplete\":true}]}}',\r\n        dataViewSourceWithErrors: '{\"descriptor\":{\"Select\":[{\"Kind\":1,\"Depth\":0,\"Value\":\"G0\"},{\"Kind\":2,\"Value\":\"M0\",\"Subtotal\":[\"A0\"],\"Min\":[\"A2\"],\"Max\":[\"A1\"]}],\"Expressions\":{\"Primary\":{\"Groupings\":[{\"Keys\":[{\"Source\":{\"Entity\":\"DimDate\",\"Property\":\"Month Name\"},\"Select\":0},{\"Source\":{\"Entity\":\"DimDate\",\"Property\":\"Month Number\"},\"Calc\":\"K0\"}]}]}}},\"dsr\":{\"DataShapes\":[{\"Id\":\"DS0\",\"odata.error\":{\"code\":\"rsDataShapeQueryTranslationError\",\"message\":{\"lang\":\"da-DK\",\"value\":\"Data Shape Query translation failed with error code: \\'InvalidExpression\\'. Check the report server logs for more information.\"},\"azure:values\":[{\"timestamp\":\"2015-01-15T07:44:45.8135124Z\"},{\"details\":\"Microsoft.ReportingServices.DataShapeQueryTranslation.DataShapeQueryTranslationException: Data Shape Query translation failed with error code: \\'InvalidExpression\\'. Check the report server logs for more information.\"},{\"helpLink\":\"http://go.microsoft.com/fwlink/?LinkId=20476&EvtSrc=Microsoft.ReportingServâ€¦Error&ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&ProdVer=1.0\"},{\"productInfo\":{\"productName\":\"change this\",\"productVersion\":\"1.0\",\"productLocaleId\":127,\"operatingSystem\":\"OsIndependent\",\"countryLocaleId\":1033}},{\"moreInformation\":{\"odata.error\":{\"code\":\"System.Exception\",\"message\":{\"lang\":\"da-DK\",\"value\":\"For more information about this error navigate to the report server on the local server machine, or enable remote errors\"},\"azure:values\":[{\"details\":\"System.Exception: For more information about this error navigate to the report server on the local server machine, or enable remote errors\"}]}}}]}}]}}',\r\n    };\r\n\r\n    export function fireOnDataChanged(visual: powerbi.IVisual, dataOptions: powerbi.VisualDataChangedOptions): void {\r\n        visual.onDataChanged(dataOptions);\r\n\r\n        jasmine.clock().tick(0);\r\n    }\r\n\r\n    export function testDom(height: string, width: string, cssClass: string = ''): JQuery {\r\n        let element = $('<div></div>')\r\n            .attr('id', 'item')\r\n            .css('width', width)\r\n            .css('height', height)\r\n            .addClass(cssClass);\r\n        setFixtures(element[0].outerHTML);\r\n\r\n        return $('#item');\r\n    }\r\n\r\n    /**\r\n     * Waits for some time and then Executes a function asynchronously\r\n     * @param {function} fn Function to be executed\r\n     * @param {number} delay Time to wait in milliseconds\r\n     */\r\n    export function executeWithDelay(fn: Function, delay: number): void {\r\n        // Uninstalling jasmine.clock() to enable using the following timer\r\n        jasmine.clock().uninstall();\r\n        \r\n        // Waiting until scroll takes effect\r\n        setTimeout(() => {\r\n            // Calling the assert function\r\n            fn();\r\n        }, delay);\r\n        \r\n        // installing the clock again\r\n        jasmine.clock().install();\r\n    }\r\n\r\n    export function isTranslateCloseTo(actualTranslate: string, expectedX: number, expectedY: number): boolean {\r\n        let splitChar = actualTranslate.indexOf(\",\") > 0 ? ',' : ' ';\r\n        let translateValues = actualTranslate.substr(10, actualTranslate.lastIndexOf(')') - 10).split(splitChar);\r\n        let actualX = parseInt(translateValues[0], 10);\r\n        let actualY = parseInt(translateValues[1], 10);\r\n\r\n        return isCloseTo(actualX, expectedX, /*tolerance*/ 1)\r\n            && isCloseTo(actualY, expectedY, /*tolerance*/ 1);\r\n    }\r\n\r\n    export function isCloseTo(actual: number, expected: number, tolerance: number = 1): boolean {\r\n        let delta = Math.abs(expected - actual);\r\n        return delta <= tolerance;\r\n    }\r\n\r\n    export function buildSelectorForColumn(queryName: string, data, selector?) {\r\n        let newSelector = selector ? selector : {};\r\n        newSelector[queryName] = data;\r\n\r\n        return newSelector;\r\n    }\r\n\r\n    /** Returns a function that can be called to trigger a dragstart. */\r\n    export function getDragStartTriggerFunctionForD3(element: HTMLElement): (arg) => {} {\r\n        let elem: any = element;\r\n        if (elem.__ondragstart)\r\n            return arg => elem.__ondragstart(arg);\r\n    }\r\n\r\n    /** Execute a dummy expect to avoid Jasmine warnings, since some tests only perform validation directly on the httpService via expectPOST etc. */\r\n    export function suppressJasmineMissingExpectWarning(): void {\r\n        expect(true).toBe(true);\r\n    }\r\n\r\n    export enum ClickEventType {\r\n        Default = 0,\r\n        CtrlKey = 1,\r\n        AltKey = 2,\r\n        ShiftKey = 4,\r\n        MetaKey = 8,\r\n    }\r\n\r\n    // Defining a simulated click event (see http://stackoverflow.com/questions/9063383/how-to-invoke-click-event-programmaticaly-in-d3)\r\n    jQuery.fn.d3Click = function (x: number, y: number, eventType?: ClickEventType): void {\r\n        let type = eventType || ClickEventType.Default;\r\n        this.each(function (i, e) {\r\n            let evt = createMouseClickEvent(type, x, y);\r\n            e.dispatchEvent(evt);\r\n        });\r\n    };\r\n\r\n    export function clickElement(element: JQuery, ctrlKey: boolean = false): void {\r\n        let coords = element.offset();\r\n        let width = element.outerWidth();\r\n        let height = element.outerHeight();\r\n        let eventType = ctrlKey ? helpers.ClickEventType.CtrlKey : helpers.ClickEventType.Default;\r\n        element.d3Click(coords.left + (width / 2), coords.top + (height / 2), eventType);\r\n    }\r\n\r\n    export function runWithImmediateAnimationFrames(func: () => void): void {\r\n        let requestAnimationFrame = window.requestAnimationFrame;\r\n        try {\r\n            window.requestAnimationFrame = (f) => setTimeout(f, 0);\r\n            func();\r\n        }\r\n        finally {\r\n            window.requestAnimationFrame = requestAnimationFrame;\r\n        }\r\n    }\r\n\r\n    export function deepCopy(object: any): any {\r\n        return JSON.parse(JSON.stringify(object));\r\n    }\r\n\r\n    export function getLocalTimeFromUTCBase(utcYear: number, utcMonth: number, utcDay: number, utcHours: number, utcMinutes: number, utcSeconds: number): Date {\r\n        // IMPORTANT: We need to dynamically calculate the UTC offset to use for our test date instead of hard-coding the offset so that:\r\n        // i) It doesn't break when daylight savings changes the UTC offset\r\n        // ii) The test works even if your machine is not in the US Pacific Time zone :)\r\n        let baseDate = new Date(utcYear, utcMonth, utcDay, utcHours, utcMinutes, utcSeconds);\r\n        let offsetMinutes = baseDate.getTimezoneOffset();\r\n        let date = new Date();\r\n        date.setTime(baseDate.getTime() - offsetMinutes * 60000);\r\n        return date;\r\n    }\r\n\r\n    export function isUndefined(value) { return typeof value === 'undefined'; }\r\n\r\n    export enum ContextMenuEntityButtonPosition {\r\n        NewMeasure = 0,\r\n        NewColumn = 1,\r\n        Rename = 3,\r\n        Delete = 4,\r\n        Hide = 5,\r\n        ViewHidden = 7,\r\n        UnhideAll = 8,\r\n    }\r\n    export enum ContextMenuPropertyButtonPosition {\r\n        AddFilter = 0,\r\n        NewMeasure = 2,\r\n        NewColumn = 3,\r\n        Rename = 5,\r\n        Delete = 6,\r\n        Hide = 7,\r\n        ViewHidden = 9,\r\n        UnhideAll = 10,\r\n    }\r\n\r\n    export interface Point {\r\n        x: number;\r\n        y: number;\r\n    }\r\n\r\n    export function parseDateString(dateString: string): Date {\r\n        let date,\r\n            timezoneOffset;\r\n\r\n        date = new Date(dateString);\r\n\r\n        if (date.toString() === 'Invalid Date') {\r\n            return null;\r\n        }\r\n\r\n        timezoneOffset = date.getTimezoneOffset();\r\n\r\n        date.setMinutes(date.getMinutes() + timezoneOffset);\r\n\r\n        return date;\r\n    }\r\n\r\n    export function createMouseWheelEvent(eventName: string, delta: number): MouseWheelEvent {\r\n        let evt = document.createEvent(\"MouseEvents\");\r\n        evt.initMouseEvent(\r\n            eventName,\r\n            true,  // boolean canBubbleArg,\r\n            true,  // boolean cancelableArg,\r\n            null,  // views::AbstractView viewArg,\r\n            120,   // long detailArg,\r\n            0,     // long screenXArg,\r\n            0,     // long screenYArg,\r\n            0,     // long clientXArg,\r\n            0,     // long clientYArg,\r\n            false, // boolean ctrlKeyArg,\r\n            false, // boolean altKeyArg,\r\n            false, // boolean shiftKeyArg,\r\n            false, // boolean metaKeyArg,\r\n            0,     // unsigned short buttonArg,\r\n            null   // EventTarget relatedTargetArg\r\n        );\r\n        let mouseEvt = <MouseWheelEvent>evt;\r\n        mouseEvt.wheelDelta = delta;\r\n\r\n        return mouseEvt;\r\n    }\r\n\r\n    export function createMouseClickEvent(eventType: ClickEventType, x: number, y: number): MouseEvent {\r\n        let type = eventType || ClickEventType.Default;\r\n        let evt = document.createEvent(\"MouseEvents\");\r\n        evt.initMouseEvent(\r\n            \"click\", // type\r\n            true,   // canBubble\r\n            true,   // cancelable\r\n            window, // view\r\n            0,      // detail\r\n            x,      // screenX\r\n            y,      // screenY\r\n            x,      // clientX\r\n            y,      // clientY\r\n            !!(type & ClickEventType.CtrlKey),  // ctrlKey\r\n            !!(type & ClickEventType.AltKey),  // altKey\r\n            !!(type & ClickEventType.ShiftKey),  // shiftKey\r\n            !!(type & ClickEventType.MetaKey),  // metaKey\r\n            0,      // button\r\n            null);  // relatedTarget\r\n        return evt;\r\n    }\r\n\r\n    /**\r\n    * The original string, which ended with '...' was always placed in the DOM\r\n    * CSS text-overflow property with value ellipsis was truncating the text visually\r\n    * This function verifies the width and visual truncation are working appropriately\r\n    */\r\n    export function verifyEllipsisActive($element: JQuery): void {\r\n        let element = $element.get(0);\r\n        expect($element.css('textOverflow')).toBe('ellipsis');\r\n        expect(element.offsetWidth).toBeLessThan(element.scrollWidth);\r\n    }\r\n\r\n    /** \r\n    Checks if value is in the given range \r\n    @val Value to check\r\n    @min Min value of range\r\n    @max Max value of range\r\n    @returns True, if value falls in range. False, otherwise\r\n    **/\r\n    export function isInRange(val: number, min: number, max: number): Boolean {\r\n        return min <= val && val <= max;\r\n    }\r\n\r\n    export function assertColorsMatch(actual: string, expected: string, invert: boolean = false): boolean {\r\n        let rgbActual = jsCommon.Color.parseColorString(actual);\r\n        let rgbExpected = jsCommon.Color.parseColorString(expected);\r\n\r\n        if (invert)\r\n            return expect(rgbActual).not.toEqual(rgbExpected);\r\n        else\r\n            return expect(rgbActual).toEqual(rgbExpected);\r\n    }\r\n\r\n    export function assertFontSizeMatch(actual: string, expectedInPt: number): boolean {\r\n        let actualInPx = parseFloat(actual);\r\n        let actualInPt = jsCommon.PixelConverter.toPoint(actualInPx);\r\n\r\n        return expect(actualInPt).toBeCloseTo(expectedInPt, 0);\r\n    }\r\n\r\n    export function verifyPositionAttributes(element: JQuery): void {\r\n        let checkAttrs = ['x', 'y', 'x1', 'x2', 'y1', 'y2'];\r\n        for (let attr of checkAttrs) {\r\n            let value = element.attr(attr);\r\n            if (!value)\r\n                continue;\r\n            let numericValue = parseInt(element.attr(attr), 10);\r\n            expect(isNaN(numericValue)).toBe(false);\r\n        }\r\n    }\r\n\r\n    export function findElementText(element: JQuery): string {\r\n        let nodes = element[0].childNodes;\r\n\r\n        if (nodes) {\r\n            for (let i = 0; i < nodes.length; i++) {\r\n                if (nodes[i].nodeType === Node.TEXT_NODE) {\r\n                    return nodes[i].textContent;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    export function findElementTitle(element: JQuery): string {\r\n        let nodes = element[0].childNodes;\r\n\r\n        if (nodes) {\r\n            for (let i = 0; i < nodes.length; i++) {\r\n                if (nodes[i].nodeType === Node.ELEMENT_NODE && nodes[i].localName === \"title\") {\r\n                    return nodes[i].textContent;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    export class DataViewBuilder {\r\n        private dataView: powerbi.DataView = { metadata: null };\r\n\r\n        public setMetadata(metadata: powerbi.DataViewMetadata): DataViewBuilder {\r\n            this.dataView.metadata = metadata;\r\n            return this;\r\n        }\r\n\r\n        public getMetadata(): powerbi.DataViewMetadata {\r\n            return this.dataView.metadata;\r\n        }\r\n\r\n        public setCategorical(categorical: powerbi.DataViewCategorical) {\r\n            this.dataView.categorical = categorical;\r\n            return this;\r\n        }\r\n\r\n        public setCategories(categories: powerbi.DataViewCategoryColumn[]) {\r\n            this.initCategorical();\r\n            this.dataView.categorical.categories = categories;\r\n\r\n            return this;\r\n        }\r\n\r\n        public addCategory(category: powerbi.DataViewCategoryColumn) {\r\n            this.initCategories();\r\n            this.dataView.categorical.categories.push(category);\r\n            return this;\r\n        }\r\n\r\n        public categoryBuilder(category: powerbi.DataViewCategoryColumn = { source: null, values: null }) {\r\n            let self = this;\r\n\r\n            return {\r\n                setIdentity(identity: powerbi.DataViewScopeIdentity[]) {\r\n                    category.identity = identity;\r\n                    return this;\r\n                },\r\n                setIdentityFields(identityFields: powerbi.data.SQExpr[]) {\r\n                    category.identityFields = identityFields;\r\n                    return this;\r\n                },\r\n                setSource(source: powerbi.DataViewMetadataColumn) {\r\n                    category.source = source;\r\n                    return this;\r\n                },\r\n                setValues(values: any[]) {\r\n                    category.values = values;\r\n                    return this;\r\n                },\r\n                setObjects(objects: powerbi.DataViewObjects[]) {\r\n                    category.objects = objects;\r\n                    return this;\r\n                },\r\n                buildCategory() {\r\n                    return self.addCategory(category);\r\n                }\r\n            };\r\n        }\r\n\r\n        public valueColumnsBuilder() {\r\n            let self = this;\r\n\r\n            this.initCategorical();\r\n\r\n            let tempValues: powerbi.DataViewValueColumn[] = [];\r\n            let valueIdentityFields: powerbi.data.SQExpr[];\r\n            let source: powerbi.DataViewMetadataColumn;\r\n            return {\r\n                newValueBuilder(value: powerbi.DataViewValueColumn = <powerbi.DataViewValueColumn>{}) {\r\n                    let self = this;\r\n                    return {\r\n                        setSubtotal(subtotal: any) {\r\n                            value.subtotal = subtotal;\r\n                            return this;\r\n                        },\r\n                        setMax(max: any) {\r\n                            value.max = max;\r\n                            return this;\r\n                        },\r\n                        setMin(min: any) {\r\n                            value.min = min;\r\n                            return this;\r\n                        },\r\n                        setHighlights(highlights: any[]) {\r\n                            value.highlights = highlights;\r\n                            return this;\r\n                        },\r\n                        setIdentity(identity: powerbi.DataViewScopeIdentity) {\r\n                            value.identity = identity;\r\n                            return this;\r\n                        },\r\n                        setMaxLocal(maxLocal: any) {\r\n                            value.maxLocal = maxLocal;\r\n                            return this;\r\n                        },\r\n                        setMinLocal(minLocal: any) {\r\n                            value.minLocal = minLocal;\r\n                            return this;\r\n                        },\r\n                        setSource(source: powerbi.DataViewMetadataColumn) {\r\n                            value.source = source;\r\n                            return this;\r\n                        },\r\n                        setValues(values: any[]) {\r\n                            value.values = values;\r\n                            return this;\r\n                        },\r\n                        setObjects(objects: powerbi.DataViewObjects[]) {\r\n                            value.objects = objects;\r\n                            return this;\r\n                        },\r\n                        buildNewValue() {\r\n                            tempValues.push(value);\r\n                            return self;\r\n                        }\r\n                    };\r\n                },\r\n                setValueIdentityFields(identityFields: powerbi.data.SQExpr[]) {\r\n                    valueIdentityFields = identityFields;\r\n                    return self;\r\n                },\r\n                setSource(src: powerbi.DataViewMetadataColumn) {\r\n                    source = src;\r\n                    return self;\r\n                },\r\n                buildValueColumns() {\r\n                    self.setValues(powerbi.data.DataViewTransform.createValueColumns(tempValues, valueIdentityFields, source));\r\n                    return self;\r\n                }\r\n            };\r\n        }\r\n\r\n        public setValues(values: powerbi.DataViewValueColumns) {\r\n            this.initCategorical();\r\n            this.dataView.categorical.values = values;\r\n\r\n            return this;\r\n        }\r\n\r\n        public build(): powerbi.DataView {\r\n            return this.dataView;\r\n        }\r\n\r\n        private initCategorical() {\r\n            if (!this.dataView.categorical) {\r\n                this.setCategorical({});\r\n            }\r\n        }\r\n\r\n        private initCategories() {\r\n            this.initCategorical();\r\n            if (!this.dataView.categorical.categories) {\r\n                this.setCategories([]);\r\n            }\r\n        }\r\n    }\r\n\r\n    export class VisualBuilder {\r\n        private height: number;\r\n\r\n        private width: number;\r\n\r\n        private pluginType: string;\r\n\r\n        private visualPluginService: powerbi.visuals.IVisualPluginService;\r\n\r\n        private visualHostService: powerbi.IVisualHostServices;\r\n\r\n        public get host(): powerbi.IVisualHostServices {\r\n            return this.visualHostService;\r\n        }\r\n\r\n        private visualStyle: powerbi.IVisualStyle;\r\n\r\n        private jQueryElement: JQuery;\r\n\r\n        public get element(): JQuery {\r\n            return this.jQueryElement;\r\n        }\r\n\r\n        private visualPlugin: powerbi.IVisual;\r\n\r\n        public get visual(): powerbi.IVisual {\r\n            return this.visualPlugin;\r\n        }\r\n\r\n        public transitionImmediate: boolean = true;\r\n\r\n        public interactivitySelection: boolean = false;\r\n\r\n        constructor(\r\n            visualPluginService: powerbi.visuals.IVisualPluginService,\r\n            pluginType: string,\r\n            height: number = 500,\r\n            width: number = 500\r\n        ) {\r\n            this.visualPluginService = visualPluginService;\r\n            this.pluginType = pluginType;\r\n            this.height = height;\r\n            this.width = width;\r\n        }\r\n\r\n        private init(): void {\r\n            this.createElement();\r\n            this.createHost();\r\n            this.createStyle();\r\n            this.createVisual();\r\n\r\n            this.initVisual();\r\n        }\r\n\r\n        private createElement(): void {\r\n            this.jQueryElement = powerbitests.helpers.testDom(\r\n                this.height.toString(),\r\n                this.width.toString());\r\n        }\r\n\r\n        private createHost(): void {\r\n            this.visualHostService = powerbitests.mocks.createVisualHostServices();\r\n        }\r\n\r\n        private createStyle(): void {\r\n            this.visualStyle = powerbi.visuals.visualStyles.create();\r\n        }\r\n\r\n        private createVisual(): void {\r\n            if (this.visualPluginService)\r\n                this.visualPlugin =\r\n                    this.visualPluginService.getPlugin(this.pluginType).create();\r\n        }\r\n\r\n        private initVisual(): void {\r\n            if (!this.visualPlugin)\r\n                return;\r\n\r\n            this.visualPlugin.init({\r\n                element: this.jQueryElement,\r\n                host: this.visualHostService,\r\n                style: this.visualStyle,\r\n                viewport: {\r\n                    height: this.height,\r\n                    width: this.width\r\n                },\r\n                animation: {\r\n                    transitionImmediate: this.transitionImmediate\r\n                },\r\n                interactivity: {\r\n                    selection: this.interactivitySelection\r\n                }\r\n            });\r\n        }\r\n\r\n        public setSize(height: number, width: number): void {\r\n            this.height = height;\r\n            this.width = width;\r\n\r\n            this.init();\r\n        }\r\n\r\n        public build(): powerbi.IVisual {\r\n            this.init();\r\n\r\n            return this.visualPlugin;\r\n        }\r\n    }\r\n\r\n    export interface VerifyReferenceLineProperties {\r\n        color: string;\r\n        opacity: number;\r\n        style: string;\r\n        inFront: boolean;\r\n        isHorizontal: boolean;\r\n        label?: {\r\n            text: string;\r\n            color: string;\r\n            horizontalPosition: string;\r\n            verticalPosition: string;\r\n        };\r\n    };\r\n\r\n    const dashedArray = '5px, 5px';\r\n    const dottedArray = '1px, 5px';\r\n\r\n    export function verifyReferenceLine(line: JQuery, label: JQuery, graphicsContext: JQuery, properties: VerifyReferenceLineProperties) {\r\n\r\n        helpers.assertColorsMatch(line.css('stroke'), properties.color);\r\n\r\n        if (properties.style === powerbi.visuals.lineStyle.dotted)\r\n            expect(line.css('stroke-dasharray')).toEqual(dottedArray);\r\n        else if (properties.style === powerbi.visuals.lineStyle.dashed)\r\n            expect(line.css('stroke-dasharray')).toEqual(dashedArray);\r\n        else\r\n            expect(line.css('stroke-dasharray')).toBeUndefined();\r\n\r\n        expect(parseFloat(line.css('stroke-opacity'))).toBeCloseTo(properties.opacity, 3);\r\n\r\n        let y1 = line.attr('y1');\r\n        let y2 = line.attr('y2');\r\n        let x1 = line.attr('x1');\r\n        let x2 = line.attr('x2');\r\n        if (properties.isHorizontal) {\r\n            expect(y1).toEqual(y2);\r\n        }\r\n        else {\r\n            expect(x1).toEqual(x2);\r\n        }\r\n\r\n        let index = line.index();\r\n        let graphicsIndex = graphicsContext.index();\r\n        if (properties.inFront)\r\n            expect(index).toBeGreaterThan(graphicsIndex);\r\n        else\r\n            expect(index).toBeLessThan(graphicsIndex);\r\n\r\n        if (!properties.label)\r\n            return;\r\n\r\n        expect(label.text()).toEqual(properties.label.text);\r\n\r\n        let labelColor = properties.label.color;\r\n        helpers.assertColorsMatch(label.css('fill'), labelColor);\r\n\r\n        let labelX = parseFloat(label.attr('x'));\r\n        let labelY = parseFloat(label.attr('y'));\r\n        if (properties.isHorizontal) {\r\n            if (properties.label.horizontalPosition === powerbi.visuals.referenceLineDataLabelHorizontalPosition.left) {\r\n                expect(helpers.isCloseTo(labelX, parseFloat(x1), 20)).toBeTruthy();\r\n            }\r\n            else {\r\n                expect(helpers.isCloseTo(labelX + label.width(), parseFloat(x2), 20)).toBeTruthy();\r\n            }\r\n\r\n            if (properties.label.verticalPosition === powerbi.visuals.referenceLineDataLabelVerticalPosition.above) {\r\n                expect(labelY).toBeLessThan(y1);\r\n            }\r\n            else {\r\n                expect(labelY).toBeGreaterThan(y1);\r\n            }\r\n        }\r\n        else {\r\n            if (properties.label.horizontalPosition === powerbi.visuals.referenceLineDataLabelHorizontalPosition.left) {\r\n                expect(labelX).toBeLessThan(x1);\r\n            }\r\n            else {\r\n                expect(labelX).toBeGreaterThan(x1);\r\n            }\r\n\r\n            if (properties.label.verticalPosition === powerbi.visuals.referenceLineDataLabelVerticalPosition.above) {\r\n                expect(helpers.isCloseTo(labelY, parseFloat(y1), 20)).toBeTruthy();\r\n            }\r\n            else {\r\n                expect(helpers.isCloseTo(labelY, parseFloat(y2), 20)).toBeTruthy();\r\n            }\r\n        }\r\n    }\r\n}"],"sourceRoot":"/source/"}