{"version":3,"sources":["visuals/formatting/donutLabelLayoutTests.ts"],"names":["powerbitests","powerbitests.createDonutLabelDataPoint","powerbitests.createRect","powerbitests.createDonutLabelLayoutWithLabelSettingsStyle","powerbitests.createRadius"],"mappings":"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","file":"visuals/formatting/donutLabelLayoutTests.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n\r\n\r\nmodule powerbitests {\r\n    import LabelDataPoint = powerbi.LabelDataPoint;\r\n    \r\n    //TODO: Remove redundant declerations and sort\r\n    import LabelParentRect = powerbi.LabelParentRect;\r\n    import LabelParentPoint = powerbi.LabelParentPoint;\r\n    import IRect = powerbi.visuals.IRect;\r\n    import IPoint = powerbi.visuals.shapes.IPoint;\r\n    import ISize = powerbi.visuals.shapes.ISize;\r\n    import RectOrientation = powerbi.NewRectOrientation;\r\n    import RectLabelPosition = powerbi.RectLabelPosition;\r\n    import PointLabelPosition = powerbi.NewPointLabelPosition;\r\n    import DataLabelRectPositioner = powerbi.DataLabelRectPositioner;\r\n    import DataLabelPointPositioner = powerbi.DataLabelPointPositioner;\r\n    import LabelLayout = powerbi.LabelLayout;\r\n    import DonutLabelLayout = powerbi.DonutLabelLayout;\r\n    import DonutLabelUtils = powerbi.visuals.DonutLabelUtils;\r\n    import LabelDataPointParentType = powerbi.LabelDataPointParentType;\r\n    import dataLabelUtils = powerbi.visuals.dataLabelUtils;\r\n    import NewDataLabelUtils = powerbi.visuals.NewDataLabelUtils;\r\n    import labelStyle = powerbi.visuals.labelStyle;\r\n   \r\n    describe(\"DonutLabelLayout tests\", () => {\r\n        const outerArcRadiusRatio = 0.9;\r\n        const innerArcRadiusRatio = 0.8;\r\n        const pi = Math.PI;\r\n\r\n        let viewport: powerbi.IViewport = { width: 500, height: 500 };\r\n        let radius = createRadius(viewport);\r\n        let donutProperties: powerbi.DonutChartProperties = {\r\n            viewport: viewport,\r\n            radius: radius,\r\n            arc: d3.svg.arc().innerRadius(0).outerRadius(radius * innerArcRadiusRatio),\r\n            outerArc: d3.svg.arc()\r\n                .innerRadius(radius * outerArcRadiusRatio)\r\n                .outerRadius(radius * outerArcRadiusRatio),\r\n            innerArcRadiusRatio: innerArcRadiusRatio,\r\n            outerArcRadiusRatio: outerArcRadiusRatio,\r\n            dataLabelsSettings: dataLabelUtils.getDefaultDonutLabelSettings(),\r\n        };\r\n        describe(\"DonutLabelLayout tests\", () => {\r\n            let donutLabelLayout: DonutLabelLayout;\r\n            const testFillColor = \"#777777\";\r\n            beforeEach(() => {\r\n                donutLabelLayout = new DonutLabelLayout({\r\n                    startingOffset: NewDataLabelUtils.startingLabelOffset,\r\n                    maximumOffset: NewDataLabelUtils.maxLabelOffset,\r\n                }, donutProperties);\r\n            });\r\n\r\n            it(\"Label is correctly laid out\", () => {\r\n                let labelDataPoints = [createDonutLabelDataPoint(\"right\", 100, 0, false, 0, pi), createDonutLabelDataPoint(\"left\", 100, 1, false, pi, pi * 2)];\r\n                let labels = donutLabelLayout.layout(labelDataPoints);\r\n                expect(labels.length).toBe(2);\r\n\r\n                // verify first label is on the right\r\n                let right = labels[0];\r\n                expect(right.boundingBox.left).toBeGreaterThan(0);\r\n                expect(right.textAnchor).toBe(\"start\");\r\n\r\n                // verify second label is on the left\r\n                let left = labels[1];\r\n                expect(left.boundingBox.left).toBeLessThan(0);\r\n                expect(left.textAnchor).toBe(\"end\");\r\n            });\r\n\r\n            it(\"Label has correct text\", () => {\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi),\r\n                    createDonutLabelDataPoint(\"abcdef\", 100, 1, false, pi, 2 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 100, 2, false, 2 * pi, 3 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 100, 3, false, 3 * pi, 4 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmnopqrstuvwxyz\", 100, 4, false, 4 * pi, 5 * pi),\r\n                ];\r\n                let labels = donutLabelLayout.layout(labelDataPoints);\r\n                expect(labels[0].text).toBe(\"abc\");\r\n                expect(labels[1].text).toBe(\"abcdef\");\r\n                expect(labels[2].text).toBe(\"abcdefghi\");\r\n                expect(labels[3].text).toBe(\"abcdefghijkl\");\r\n                expect(labels[4].text).toContain(\"â€¦\");\r\n            });\r\n\r\n            it(\"Label uses fill color\", () => {\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi),\r\n                    createDonutLabelDataPoint(\"abcdef\", 100, 1, false, pi, 2 * pi),\r\n                ];\r\n                let labels = donutLabelLayout.layout(labelDataPoints);\r\n                expect(labels[0].fill).toBe(testFillColor);\r\n                expect(labels[1].fill).toBe(testFillColor);\r\n            });\r\n\r\n            it(\"Label has leader lines\", () => {\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi),\r\n                    createDonutLabelDataPoint(\"abcdef\", 100, 1, false, pi, 2 * pi),\r\n                ];\r\n                let labels = donutLabelLayout.layout(labelDataPoints);\r\n                expect(labels[0].leaderLinePoints).toEqual([[164, 0], [180, 0], [192, 0]] );\r\n                expect(labels[1].leaderLinePoints).toEqual([[-164, 2.0084207506016593e-14], [-180, 2.2043642384652358e-14], [-192, 2.2043642384652358e-14]] );\r\n\r\n            });\r\n\r\n            it(\"DonutLabelLayout changes truncated labels position \", () => {\r\n                let propertiesWithCustomSetttings = dataLabelUtils.getDefaultDonutLabelSettings();\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.both;\r\n\r\n                let donutLabelLayoutWithCustomLabelSetting: DonutLabelLayout = createDonutLabelLayoutWithLabelSettingsStyle(propertiesWithCustomSetttings);\r\n                let dataLabelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdef\", 200, 1, false, pi, 2 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 300, 2, false, 2 * pi, 3 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 400, 3, false, 3 * pi, 4 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 500, 4, false, 4 * pi, +5 * pi, labelStyle.both),\r\n                ];\r\n                let dataLabels = donutLabelLayoutWithCustomLabelSetting.layout(dataLabelDataPoints);\r\n\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi),\r\n                    createDonutLabelDataPoint(\"abcdef\", 200, 1, false, pi, 2 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 300, 2, false, 2 * pi, 3 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 400, 3, false, 3 * pi, 4 * pi),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 500, 4, false, 4 * pi, 5 * pi),\r\n                ];\r\n                let categoryLabels = donutLabelLayout.layout(labelDataPoints);\r\n\r\n                expect(dataLabels.length).toBe(categoryLabels.length);\r\n                expect(dataLabels[0].boundingBox.top).toBeGreaterThan(categoryLabels[0].boundingBox.top);\r\n                expect(dataLabels[1].boundingBox.top).toBeGreaterThan(categoryLabels[1].boundingBox.top);\r\n                expect(dataLabels[2].boundingBox.top).toBeLessThan(categoryLabels[2].boundingBox.top);\r\n            });\r\n        });\r\n        describe(\"DonutLabelLayout tests with different labelStyle\", () => {\r\n\r\n            it(\"Label is data label\", () => {\r\n                let propertiesWithCustomSetttings = dataLabelUtils.getDefaultDonutLabelSettings();\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.data;\r\n                let donutLabelLayoutWithCustomLabelSetting: DonutLabelLayout = createDonutLabelLayoutWithLabelSettingsStyle(propertiesWithCustomSetttings);\r\n\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdef\", 200, 1, false, pi, 2 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 300, 2, false, 2 * pi, 3 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 400, 3, false, 3 * pi, 4 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 500, 4, false, 4 * pi, 5 * pi, labelStyle.data),\r\n                ];\r\n                let labels = donutLabelLayoutWithCustomLabelSetting.layout(labelDataPoints);\r\n                expect(labels[0].text).toBe(\"$100\");\r\n                expect(labels[1].text).toBe(\"$200\");\r\n                expect(labels[2].text).toBe(\"$300\");\r\n                expect(labels[3].text).toBe(\"$400\");\r\n                expect(labels[4].text).toBe(\"$500\");\r\n            });\r\n\r\n            it(\"Label has second row text\", () => {\r\n                let propertiesWithCustomSetttings = dataLabelUtils.getDefaultDonutLabelSettings();\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.both;\r\n\r\n                let donutLabelLayoutWithCustomLabelSetting: DonutLabelLayout = createDonutLabelLayoutWithLabelSettingsStyle(propertiesWithCustomSetttings);\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 100, 0, false, 0, pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdef\", 200, 1, false, pi, 2 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 300, 2, false, 2 * pi, 3 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 400, 3, false, 3 * pi, 4 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 500, 4, false, 4 * pi, 5 * pi, labelStyle.both),\r\n                ];\r\n                let labels = donutLabelLayoutWithCustomLabelSetting.layout(labelDataPoints);\r\n                expect(labels.length).toBe(5);\r\n                expect(labels[0].text).toBe(\"abc ($100)\");\r\n                expect(labels[1].text).toBe(\"abcdef ($200)\");\r\n                expect(labels[2].text).toContain(\"$300\");\r\n                expect(labels[3].text).toBe(\"$400\");\r\n                expect(labels[4].text).toBe(\"$500\");\r\n                expect(labels[3].secondRowText).toContain(\"abcdef\");\r\n                expect(labels[4].secondRowText).toContain(\"abcdef\");\r\n            });\r\n\r\n            it(\"DonutLabelLayout changes position of overlapping labels \", () => {\r\n                let propertiesWithCustomSetttings = dataLabelUtils.getDefaultDonutLabelSettings();\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.data;\r\n\r\n                let donutLabelLayoutDataLabels: DonutLabelLayout = createDonutLabelLayoutWithLabelSettingsStyle(propertiesWithCustomSetttings);\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 1000, 0, false, 0, pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdef\", 5000, 1, false, pi, 2 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 2000, 2, false, 2 * pi, 3 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 1000, 3, false, 3 * pi, 4 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 5000, 4, false, 4 * pi, 5 * pi, labelStyle.both),\r\n                ];\r\n                let dataLabels = donutLabelLayoutDataLabels.layout(labelDataPoints);\r\n\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.data;\r\n                let overlappingLabelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 1000, 0, false, 0, pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdef\", 5, 1, false, pi, 2 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 2, 2, false, 2 * pi, 3 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 1, 3, false, 3 * pi, 4 * pi, labelStyle.data),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 5000, 4, false, 4 * pi, 5 * pi, labelStyle.data),\r\n                ];\r\n                let categoryLabels = donutLabelLayoutDataLabels.layout(overlappingLabelDataPoints);\r\n\r\n                expect(dataLabels.length).toBe(categoryLabels.length);\r\n                expect(dataLabels[0].boundingBox.top).toBe(categoryLabels[0].boundingBox.top);\r\n                expect(dataLabels[1].boundingBox.top).toBeGreaterThan(categoryLabels[1].boundingBox.top);\r\n                expect(dataLabels[2].boundingBox.top).toBe(categoryLabels[2].boundingBox.top);\r\n                expect(dataLabels[3].boundingBox.top).toBeGreaterThan(categoryLabels[3].boundingBox.top);\r\n                expect(dataLabels[4].boundingBox.top).toBe(categoryLabels[4].boundingBox.top);\r\n            });\r\n\r\n            it(\"DonutLabelLayout culls labels when offset gets too large\", () => {\r\n                let propertiesWithCustomSetttings = dataLabelUtils.getDefaultDonutLabelSettings();\r\n                propertiesWithCustomSetttings.labelStyle = labelStyle.both;\r\n\r\n                let donutLabelLayout: DonutLabelLayout = createDonutLabelLayoutWithLabelSettingsStyle(propertiesWithCustomSetttings);\r\n                let labelDataPoints = [\r\n                    createDonutLabelDataPoint(\"abc\", 1000000, 0, false, 0, pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdef\", 200000, 1, false, pi, 2 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghi\", 10, 2, false, 2 * pi, 3 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijkl\", 0.002, 3, false, 3 * pi, 4 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmno\", 0.001, 4, false, 4 * pi, 5 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmnopqr\", 0.002, 5, false, 5 * pi, 6 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmnopqrstu\", 0.0002, 6, false, 6 * pi, 7 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmnopqrstuvwxyzABCDEFG\", 7000000, 7, false, 7 * pi, 8 * pi, labelStyle.both),\r\n                    createDonutLabelDataPoint(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIK\", 9000000, 8, false, 8 * pi, 9 * pi, labelStyle.both),\r\n                ];\r\n                let dataLabels = donutLabelLayout.layout(labelDataPoints);\r\n                expect(dataLabels.length).toBeLessThan(labelDataPoints.length);\r\n            });\r\n        });\r\n\r\n        /**\r\n        * Creating a donut label data point.\r\n        * When creating a label make sure that the start and end angles are in radians\r\n        */\r\n        function createDonutLabelDataPoint(text: string, value: number, index: number, isPreferred: boolean = false, startAngle: number = 1, endAngle: number = 10, customLabelSetting: any = null): powerbi.DonutLabelDataPoint {\r\n            let data: powerbi.visuals.DonutDataPoint = {\r\n                measure: value,\r\n                percentage: undefined,\r\n                highlightRatio: undefined,\r\n                label: undefined,\r\n                index: undefined,\r\n                color: undefined,\r\n                strokeWidth: undefined,\r\n                labelFormatString: undefined,\r\n                identity: undefined,\r\n                selected: false,\r\n                tooltipInfo: undefined,\r\n            }\r\n            let donutArcDescriptor: powerbi.visuals.DonutArcDescriptor = {\r\n                data: data,\r\n                value: value,\r\n                startAngle: startAngle,\r\n                endAngle: endAngle,\r\n                index: index,\r\n            };\r\n            let labelPoint = donutProperties.outerArc.centroid(donutArcDescriptor);\r\n            let labelX = DonutLabelUtils.getXPositionForDonutLabel(labelPoint[0]);\r\n            let labelY = labelPoint[1];\r\n            let labelSettings = donutProperties.dataLabelsSettings;\r\n            let position = labelX < 0 ? PointLabelPosition.Left : PointLabelPosition.Right;\r\n            let pointPosition: LabelParentPoint = {\r\n                point: {\r\n                    x: labelX,\r\n                    y: labelY,\r\n                },\r\n                validPositions: [position],\r\n                radius: 0,\r\n            };\r\n            let dataLabel: string;\r\n            let dataLabelSize: ISize;\r\n            let categoryLabel: string;\r\n            let categoryLabelSize: ISize;\r\n            let textSize: ISize;\r\n            let labelSettingsStyle = customLabelSetting ? customLabelSetting : labelSettings.labelStyle;\r\n            let fontSize = labelSettings.fontSize;\r\n\r\n            if (labelSettingsStyle === labelStyle.both || labelSettingsStyle === labelStyle.data) {\r\n                let measureFormatter = dataLabelUtils.createColumnFormatterCacheManager().getOrCreate('$0', labelSettings, value);\r\n                dataLabel = measureFormatter.format(value);\r\n                dataLabelSize = NewDataLabelUtils.getTextSize(dataLabel, fontSize);\r\n            }\r\n\r\n            if (labelSettingsStyle === labelStyle.both || labelSettingsStyle === labelStyle.category) {\r\n                categoryLabel = text;\r\n                categoryLabelSize = NewDataLabelUtils.getTextSize(categoryLabel, fontSize);\r\n            }\r\n\r\n            switch (labelSettingsStyle) {\r\n                case labelStyle.both:\r\n                    let text = categoryLabel + \" (\" + dataLabel + \")\";\r\n                    textSize = NewDataLabelUtils.getTextSize(text, fontSize);\r\n                    break;\r\n                case labelStyle.category:\r\n                    textSize = _.clone(categoryLabelSize);\r\n                    break;\r\n                case labelStyle.data:\r\n                    textSize = _.clone(dataLabelSize);\r\n                    break;\r\n            }\r\n\r\n            let leaderLinePoints = DonutLabelUtils.getLabelLeaderLineForDonutChart(donutArcDescriptor, donutProperties, pointPosition.point);\r\n            let leaderLinesSize = DonutLabelUtils.getLabelLeaderLinesSizeForDonutChart(leaderLinePoints);\r\n\r\n            return {\r\n                textSize: textSize,\r\n                isPreferred: isPreferred,\r\n                parentType: LabelDataPointParentType.Point,\r\n                parentShape: pointPosition,\r\n                text: \"\",\r\n                insideFill: NewDataLabelUtils.defaultInsideLabelColor,\r\n                outsideFill: NewDataLabelUtils.defaultLabelColor,\r\n                identity: undefined,\r\n                dataLabel: dataLabel,\r\n                dataLabelSize: dataLabelSize,\r\n                categoryLabel: categoryLabel,\r\n                categoryLabelSize: categoryLabelSize,\r\n                donutArcDescriptor: donutArcDescriptor,\r\n                alternativeScale: undefined,\r\n                angle: (startAngle + endAngle) / 2 - (Math.PI / 2),\r\n                linesSize: leaderLinesSize,\r\n                leaderLinePoints: leaderLinePoints,\r\n            };\r\n        }\r\n\r\n        function createRect(left: number, top: number, width: number, height: number): IRect {\r\n            return {\r\n                left: left,\r\n                top: top,\r\n                width: width,\r\n                height: height,\r\n            };\r\n        }\r\n\r\n        function createDonutLabelLayoutWithLabelSettingsStyle(customLabelSettings: powerbi.visuals.VisualDataLabelsSettings): powerbi.DonutLabelLayout {\r\n            let donutPropertiesWithCustomLabelSettingsStyle: powerbi.DonutChartProperties = {\r\n                viewport: viewport,\r\n                radius: radius,\r\n                arc: d3.svg.arc().innerRadius(0).outerRadius(radius * innerArcRadiusRatio),\r\n                outerArc: d3.svg.arc()\r\n                    .innerRadius(radius * outerArcRadiusRatio)\r\n                    .outerRadius(radius * outerArcRadiusRatio),\r\n                innerArcRadiusRatio: innerArcRadiusRatio,\r\n                outerArcRadiusRatio: outerArcRadiusRatio,\r\n                dataLabelsSettings: customLabelSettings,\r\n            };\r\n\r\n            let donutLabelLayout: DonutLabelLayout = new DonutLabelLayout({\r\n                startingOffset: NewDataLabelUtils.startingLabelOffset,\r\n                maximumOffset: NewDataLabelUtils.maxLabelOffset,\r\n            },\r\n                donutPropertiesWithCustomLabelSettingsStyle);\r\n            return donutLabelLayout;\r\n\r\n        }\r\n\r\n        function createRadius(viewport: powerbi.IViewport): number {\r\n            if (!viewport || !viewport.width || !viewport.height) return 0;\r\n            let hw = viewport.height / viewport.width;\r\n            let denom = 2 + (1 / (1 + Math.exp(-5 * (hw - 1))));\r\n            return Math.min(viewport.height, viewport.width) / denom;\r\n        }\r\n    });\r\n}"],"sourceRoot":"/source/"}