{"version":3,"sources":["visuals/services/storageServiceTests.ts"],"names":["powerbitests"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;EAwBE;AAIF,IAAO,YAAY,CAsClB;AAtCD,WAAO,YAAY,EAAC,CAAC;IACjBA,IAAOA,uBAAuBA,GAAGA,OAAOA,CAACA,uBAAuBA,CAACA;IAEjEA,QAAQA,CAACA,2BAA2BA,EAAEA;QAClCA,EAAEA,CAACA,sCAAsCA,EAAEA;YACvCA,IAAIA,OAAOA,GAAGA,IAAIA,uBAAuBA,EAAEA,CAACA;YAE5CA,OAAOA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,OAAOA,CAACA,CAACA;YAEhCA,IAAIA,KAAKA,GAAGA,OAAOA,CAACA,OAAOA,CAACA,KAAKA,CAACA,CAACA;YAEnCA,MAAMA,CAACA,KAAKA,CAACA,CAACA,IAAIA,CAACA,OAAOA,CAACA,CAACA;QAChCA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,wCAAwCA,EAAEA;YACzCA,IAAIA,OAAOA,GAAGA,IAAIA,uBAAuBA,EAAEA,CAACA;YAE5CA,OAAOA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,OAAOA,CAACA,CAACA;YAEjCA,IAAIA,KAAKA,GAAGA,OAAOA,CAACA,OAAOA,CAACA,MAAMA,CAACA,CAACA;YAEpCA,MAAMA,CAACA,KAAKA,IAAIA,IAAIA,CAACA,CAACA,UAAUA,EAAEA,CAACA;QACvCA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,iCAAiCA,EAAEA,UAACA,IAAIA;YACvCA,IAAIA,OAAOA,GAAGA,EAAEA,CAACA;YACjBA,IAAIA,OAAOA,GAAGA,IAAIA,uBAAuBA,CAACA,OAAOA,CAACA,CAACA;YAEnDA,OAAOA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,OAAOA,CAACA,CAACA;YAEhCA,UAAUA,CAACA;gBACPA,iCAAiCA;gBACjCA,IAAIA,KAAKA,GAAGA,OAAOA,CAACA,OAAOA,CAACA,KAAKA,CAACA,CAACA;gBACnCA,MAAMA,CAACA,KAAKA,IAAIA,IAAIA,CAACA,CAACA,UAAUA,EAAEA,CAACA;gBACnCA,IAAIA,EAAEA,CAACA;YACXA,CAACA,EAAEA,OAAOA,GAAGA,EAAEA,CAACA,CAACA;QACrBA,CAACA,CAACA,CAACA;IACPA,CAACA,CAACA,CAACA;AACPA,CAACA,EAtCM,YAAY,KAAZ,YAAY,QAsClB","file":"visuals/services/storageServiceTests.js","sourcesContent":["/*\r\n*  Power BI Visualizations\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved. \r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*   \r\n*  The above copyright notice and this permission notice shall be included in \r\n*  all copies or substantial portions of the Software.\r\n*   \r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\n\r\n\r\nmodule powerbitests {\r\n    import EphemeralStorageService = powerbi.EphemeralStorageService;\r\n\r\n    describe('Ephemeral Storage Service', () => {\r\n        it('get with existing key retrieves data', () => {\r\n            let storage = new EphemeralStorageService();\r\n\r\n            storage.setData('key', 'value');\r\n\r\n            let value = storage.getData('key');\r\n\r\n            expect(value).toBe('value');\r\n        });\r\n\r\n        it('get with non-existing key returns null', () => {\r\n            let storage = new EphemeralStorageService();\r\n\r\n            storage.setData('key1', 'value');\r\n\r\n            let value = storage.getData('key2');\r\n\r\n            expect(value == null).toBeTruthy();\r\n        });\r\n\r\n        it('cache is cleared after interval', (done) => {\r\n            let timeout = 10;\r\n            let storage = new EphemeralStorageService(timeout);\r\n\r\n            storage.setData('key', 'value');\r\n\r\n            setTimeout(() => {    \r\n                // cache should be cleared by now\r\n                let value = storage.getData('key');\r\n                expect(value == null).toBeTruthy();\r\n                done();\r\n            }, timeout + 10);\r\n        });\r\n    });\r\n}"],"sourceRoot":"/source/"}