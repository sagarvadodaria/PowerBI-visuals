{"version":3,"sources":["visuals/animatedTextTests.ts"],"names":["powerbitests","powerbitests.AnimatedTextBuilder","powerbitests.AnimatedTextBuilder.constructor","powerbitests.AnimatedTextBuilder.animatedText","powerbitests.AnimatedTextBuilder.init","powerbitests.AnimatedTextBuilder.doValueTransition"],"mappings":"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AACA,YAAYA,CAACA,EAAEA,CAACA,CAACA;QACnGA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,0FAA0FA,EAAEA;YAC3FA,+DAA+DA;YAC/DA,2GAA2GA;YAC3GA,MAAMA,CAACA,mBAAmBA,CAACA,YAAYA,CAACA,qBAAqBA,CAACA,EAAEA,EAAEA,MAAMA,EAAEA,CAACA,CAACA,CAACA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;QAC1FA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,0CAA0CA,EAAEA,UAACA,IAAIA;YAChDA,mBAAmBA,CAACA,iBAAiBA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;YAC5CA,MAAMA,CAACA,CAACA,CAACA,eAAeA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACvCA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACnCA,UAAUA,CAACA;gBACPA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,IAAIA,EAAEA,CAACA,CAACA,OAAOA,CAACA,GAAGA,CAACA,CAACA;gBAC3CA,IAAIA,EAAEA,CAACA;YACXA,CAACA,EAAEA,iCAAoBA,CAACA,CAACA;QAC7BA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,uDAAuDA,EAAEA,UAACA,IAAIA;YAC7DA,mBAAmBA,CAACA,iBAAiBA,CAACA,CAACA,EAAEA,OAAOA,CAACA,CAACA;YAClDA,MAAMA,CAACA,CAACA,CAACA,eAAeA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACvCA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACnCA,UAAUA,CAACA;gBACPA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,IAAIA,EAAEA,CAACA,CAACA,OAAOA,CAACA,OAAOA,CAACA,CAACA;gBAC/CA,IAAIA,EAAEA,CAACA;YACXA,CAACA,EAAEA,iCAAoBA,CAACA,CAACA;QAC7BA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,0DAA0DA,EAAEA,UAACA,IAAIA;YAChEA,mBAAmBA,CAACA,iBAAiBA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;YAC5CA,MAAMA,CAACA,CAACA,CAACA,eAAeA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACvCA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACnCA,UAAUA,CAACA;gBACPA,oDAAoDA;gBACpDA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,IAAIA,CAACA,WAAWA,CAACA,CAACA,CAACA,OAAOA,CAACA,0BAA0BA,CAACA,CAACA;gBAC7EA,IAAIA,EAAEA,CAACA;YACXA,CAACA,EAAEA,iCAAoBA,CAACA,CAACA;QAC7BA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,qCAAqCA,EAAEA,UAACA,IAAIA;YAC3CA,mBAAmBA,CAACA,iBAAiBA,CAACA,IAAIA,EAAEA,CAACA,CAACA,CAACA;YAC/CA,MAAMA,CAACA,CAACA,CAACA,eAAeA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACvCA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACnCA,UAAUA,CAACA;gBACPA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAACA,CAACA,IAAIA,EAAEA,CAACA,CAACA,OAAOA,CAACA,GAAGA,CAACA,CAACA;gBAC3CA,IAAIA,EAAEA,CAACA;YACXA,CAACA,EAAEA,iCAAoBA,CAACA,CAACA;QAC7BA,CAACA,CAACA,CAACA;QAEHA,EAAEA,CAACA,wCAAwCA,EAAEA,UAACA,IAAIA;YAC9CA,mBAAmBA,CAACA,iBAAiBA,CAACA,IAAIA,EAAEA,IAAIA,CAACA,CAACA;YAClDA,MAAMA,CAACA,CAACA,CAACA,eAAeA,CAACA,CAACA,CAACA,SAASA,EAAEA,CAACA;YACvCA,MAAMA,CAACA,CAACA,CAACA,WAAWA,CAA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","file":"visuals/animatedTextTests.js","sourcesContent":["/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved. \r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *   \r\n *  The above copyright notice and this permission notice shall be included in \r\n *  all copies or substantial portions of the Software.\r\n *   \r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n\r\n\r\nmodule powerbitests {\r\n    import AnimatedText = powerbi.visuals.AnimatedText;\r\n\r\n    describe(\"AnimatedText\", () => {\r\n        let animatedText: AnimatedText;\r\n        \r\n        beforeEach(() => {\r\n            animatedText = new AnimatedText(\"animatedText\");\r\n        });\r\n\r\n        it(\"AnimatedText_getSeedFontHeight does not exceed style maximum\", () => {\r\n            animatedText.style = powerbi.visuals.visualStyles.create();\r\n\r\n            expect(animatedText.getSeedFontHeight(100, 90)).toBeLessThan(100);\r\n        });\r\n\r\n        it(\"AnimatedText_getSeedFontHeight returns a smaller number than the height\", () => {\r\n            animatedText.style = powerbi.visuals.visualStyles.create();\r\n\r\n            expect(animatedText.getSeedFontHeight(100, 90)).toBeLessThan(100);\r\n        });\r\n\r\n        it(\"AnimatedText TextColor is rgba(51,51,51,1) by default\", () => {\r\n            animatedText.style = powerbi.visuals.visualStyles.create();\r\n\r\n            helpers.assertColorsMatch(animatedText.style.titleText.color.value, 'rgba(51,51,51,1)');\r\n        });\r\n\r\n        it(\"AnimatedText_setTextColor correctly sets style\", () => {\r\n            animatedText.style = powerbi.visuals.visualStyles.create();\r\n\r\n            let setTextColor = '#F00';\r\n            animatedText.setTextColor(setTextColor);\r\n\r\n            helpers.assertColorsMatch(animatedText.style.titleText.color.value, setTextColor);\r\n        });\r\n\r\n        it(\"AnimatedText_getTextAnchor when the aligment is 'left'\", () => {\r\n            animatedText.visualConfiguration = {\r\n                align: \"left\"\r\n            };\r\n            expect(animatedText.getTextAnchor()).toBe(\"start\");\r\n        });\r\n\r\n        it(\"AnimatedText_getTextAnchor when the aligment is 'right'\", () => {\r\n            animatedText.visualConfiguration = {\r\n                align: \"right\"\r\n            };\r\n            expect(animatedText.getTextAnchor()).toBe(\"end\");\r\n        });\r\n\r\n        it(\"AnimatedText_getTextAnchor when the aligment is undefined\", () => {\r\n            animatedText.visualConfiguration = undefined;\r\n            expect(animatedText.getTextAnchor()).toBe(\"middle\");\r\n\r\n            animatedText.visualConfiguration = {\r\n                align: \"center\"\r\n            };\r\n            expect(animatedText.getTextAnchor()).toBe(\"middle\");\r\n        });\r\n\r\n        it(\"AnimatedText_getTranslateX alignment is 'left'\", () => {\r\n            animatedText.visualConfiguration = {\r\n                align: \"left\"\r\n            };\r\n            expect(animatedText.getTranslateX(0)).toBe(0);\r\n            expect(animatedText.getTranslateX(100)).toBe(0);\r\n        });\r\n\r\n        it(\"AnimatedText_getTranslateX alignment is 'right'\", () => {\r\n            animatedText.visualConfiguration = {\r\n                align: \"right\"\r\n            };\r\n            expect(animatedText.getTranslateX(0)).toBe(0);\r\n            expect(animatedText.getTranslateX(100)).toBe(100);\r\n        });\r\n\r\n        it(\"AnimatedText_getTranslateX when alignment is undefined, returns the center\", () => {\r\n            animatedText.visualConfiguration = undefined;\r\n            expect(animatedText.getTranslateX(0)).toBe(0);\r\n            expect(animatedText.getTranslateX(100)).toBe(50);\r\n        });\r\n    });\r\n\r\n    describe(\"AnimatedText DOM tests\", () => {\r\n        let animatedTextBuilder: AnimatedTextBuilder;\r\n\r\n        let animationOptions: powerbi.AnimationOptions = {\r\n            transitionImmediate: true\r\n        };\r\n\r\n        beforeEach((done) => {\r\n            animatedTextBuilder = \r\n                new AnimatedTextBuilder(\"200\", \"300\", \"animatedText\", animationOptions);\r\n            \r\n            done();\r\n        });\r\n\r\n        it(\"AnimatedText_getAdjustedFontHeight when seed font width is bigger than the width\", () => {\r\n            // parameters are availableWidth, textToMeasure, seedFontHeight\r\n            // When the measured text with the seed height is bigger than availableWidth, decrease the font height\r\n            expect(animatedTextBuilder.animatedText.getAdjustedFontHeight(4, \"text\", 10)).toBeLessThan(10);\r\n        });\r\n\r\n        it(\"AnimatedText_getAdjustedFontHeight when seed font width is smaller or equal to the width\", () => {\r\n            // parameters are availableWidth, textToMeasure, seedFontHeight\r\n            // When the measured text with the seed height is equal/smaller than availableWidth, return the font height\r\n            expect(animatedTextBuilder.animatedText.getAdjustedFontHeight(30, \"text\", 3)).toBe(3);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition sets text\", (done) => {\r\n            animatedTextBuilder.doValueTransition(3, 4);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                expect($(\".mainText\").text()).toEqual(\"4\");\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition formats number > 10000\", (done) => {\r\n            animatedTextBuilder.doValueTransition(3, 4534353);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                expect($(\".mainText\").text()).toEqual(\"4.53M\");\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition sets translateY correctly\", (done) => {\r\n            animatedTextBuilder.doValueTransition(3, 4);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                // IE and Chrome represent the transform differently\r\n                expect($(\".mainText\").attr(\"transform\")).toMatch(/translate\\(\\d+(,| )130\\)/);\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition to 0\", (done) => {\r\n            animatedTextBuilder.doValueTransition(null, 0);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                expect($(\".mainText\").text()).toEqual(\"0\");\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition to null\", (done) => {\r\n            animatedTextBuilder.doValueTransition(null, null);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                expect(helpers.findElementText($(\".mainText\"))).toEqual(\"(Blank)\");\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n\r\n        it(\"AnimatedText doValueTransition with text color set\", (done) => {\r\n            let setTextColor = 'rgb(255,0,0)';\r\n        animatedTextBuilder.animatedText.setTextColor(setTextColor);\r\n\r\n            animatedTextBuilder.doValueTransition(3, 4);\r\n            expect($(\".animatedText\")).toBeInDOM();\r\n            expect($(\".mainText\")).toBeInDOM();\r\n            setTimeout(() => {\r\n                helpers.assertColorsMatch($(\".mainText\").css('fill'), setTextColor);\r\n                done();\r\n            }, DefaultWaitForRender);\r\n        });\r\n    });\r\n    \r\n    class AnimatedTextBuilder {\r\n        private element: JQuery;\r\n        \r\n        private animationOptions: powerbi.AnimationOptions;\r\n        \r\n        private animatedTextVisual: AnimatedText;\r\n        \r\n        public get animatedText(): AnimatedText {\r\n            return this.animatedTextVisual;\r\n        }\r\n        \r\n        constructor(\r\n            height: string, \r\n            width: string, \r\n            animatedTextName: string, \r\n            animationOptions: powerbi.AnimationOptions) {\r\n                \r\n            this.animationOptions = animationOptions;\r\n            \r\n            this.element = powerbitests.helpers.testDom(height, width);\r\n            this.animatedTextVisual = new AnimatedText(animatedTextName);\r\n            \r\n            this.init();\r\n        }\r\n        \r\n        private init(): void {\r\n            this.animatedText.currentViewport = {\r\n                height: this.element.height(),\r\n                width: this.element.width()\r\n            };\r\n            \r\n            this.animatedText.hostServices = powerbitests.mocks.createVisualHostServices();\r\n            this.animatedText.svg = d3.select(this.element.get(0)).append(\"svg\");\r\n            this.animatedText.style = powerbi.visuals.visualStyles.create();\r\n        }\r\n        \r\n        public doValueTransition(startValue: any, endValue: any): void {\r\n            this.animatedText.doValueTransition(startValue, endValue, null, this.animationOptions, 0, false);\r\n        }\r\n    }\r\n}"],"sourceRoot":"/source/"}